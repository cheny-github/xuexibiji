##### 更新数据

---

- 提交事务

什么是事务：数据库应用中构成单一逻辑工作单元的操作集合。属于数据库的并发控制技术。

事务的ACID性质：

Atomicity：原子性。事务操作是原子不可分的。通俗的说就是，所有组成事务的操作要么全部执行，要么全部都不执行。

Consistency:一致性。要求事务执行完成后从一个一致状态转变到另外一个一致状态。举例理解：从A账户转账到B账户。A的钱减了，B的钱一定要增加。也就是说操作前后数据在逻辑上要保持一致。

Isolation：隔离性。并发操作时，排队执行事务。以保证数据的一致性。通过上锁来保证事务的隔离性。

Durability：永久性。一旦事务提交，那么对数据库的修改将是持久的。我的理解：事务提交后数据就写到磁盘上了。





----



由于JDBC的事务自动提交默认是关闭的，更新数据完毕后需要调用SqlSession对象的commit方法提交事务才能真正的把数据写到数据库。

可以在new SqlSession对象的时候传入参数true 开启自动提交事务。

开发中一般不自动提交事务，以保证多个操作的原子性。



- 事务回滚

回滚操作保证了原子性。当操作发生错误时，操作状态返回到事务开始的状态。

每个SqlSession对象中都有一个Transaction对象。在SqlSession对象中执行的所有Sql操作都放到Transaction对象中，最后commit的时候提交。通过调用SqlSession对象的rollback方法可以将Transaction对象的状态置为事务开始状态。

代码层面中，一个session做一个事务。